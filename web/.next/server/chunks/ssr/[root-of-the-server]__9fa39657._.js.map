{"version":3,"sources":["../../../../src/components/auth/AuthForm.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/login/%5Bcode%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/auth/AuthForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/auth/AuthForm.tsx\",\n    \"default\",\n);\n","import AuthForm from '@/components/auth/AuthForm';\r\nimport { loginAction, registerAction } from '@/app/auth/actions';\r\nimport { redirect } from 'next/navigation';\r\nimport { createServerClient } from '@supabase/ssr';\r\nimport { cookies } from 'next/headers';\r\nimport styles from '@/components/auth/AuthForm.module.css'; // Reusing container styles for wrapper\r\n\r\n// Force dynamic to handle the [code] param and headers\r\nexport const dynamic = 'force-dynamic';\r\n\r\nexport default async function LoginPage({ params }: { params: Promise<{ code: string }> }) {\r\n    const { code } = await params;\r\n    const siteKey = process.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY;\r\n\r\n    if (!siteKey) {\r\n        return <div style={{ color: 'white', textAlign: 'center', padding: '50px' }}>Erro: Site Key n√£o configurada.</div>;\r\n    }\r\n\r\n    // Check if already logged in\r\n    const cookieStore = await cookies();\r\n\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll();\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        );\r\n                    } catch {\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    );\r\n\r\n    const { data: { session } } = await supabase.auth.getSession();\r\n\r\n    if (session) {\r\n        redirect('/');\r\n    }\r\n\r\n    // Bind server actions with the code? The form handles passing the code.\r\n    // We pass the raw actions to the client component, which calls them.\r\n\r\n    return (\r\n        <div style={{\r\n            minHeight: '100vh',\r\n            background: 'linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.9)), url(/images/login-bg.jpg) no-repeat center center/cover',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '1rem'\r\n        }}>\r\n            <AuthForm\r\n                loginCode={code}\r\n                onLogin={loginAction}\r\n                onRegister={registerAction}\r\n                siteKey={siteKey}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"iWAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,kSAAoS,EACjU,iEACA,gEAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,8QAAgR,EAC7S,6CACA,6GCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MAMe,eAAe,EAAU,QAAE,CAAM,CAAyC,EACrF,GAAM,MAAE,CAAI,CAAE,CAAG,MAAM,EACjB,EAAU,QAAQ,GAAG,CAAC,8BAA8B,CAE1D,GAAI,CAAC,EACD,MAAO,CADG,AACH,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,QAAS,UAAW,SAAU,QAAS,MAAO,WAAG,oCAIjF,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,IAE3B,EAAW,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAC/B,QAAQ,GAAG,CAAC,wBAAwB,CACpC,QAAQ,GAAG,CAAC,6BAA6B,CACzC,CACI,QAAS,QACL,IACW,EAAY,MAAM,GAE7B,OAAO,CAAY,EACf,GAAI,CACA,EAAa,OAAO,CAAC,CAAC,MAAE,CAAI,OAAE,CAAK,CAAE,SAAO,CAAE,GAC1C,EAAY,GAAG,CAAC,EAAM,EAAO,GAErC,CAAE,KAAM,CACR,CACJ,CACJ,CACJ,GAGE,CAAE,KAAM,CAAE,SAAO,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,UAAU,GAS5D,OAPI,GACA,CAAA,EAAA,EAAA,CADS,OACT,AAAQ,EAAC,KAOT,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CACR,UAAW,QACX,WAAY,6GACZ,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,QAAS,MACb,WACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAQ,CAAA,CACL,UAAW,EACX,QAAS,EAAA,WAAW,CACpB,WAAY,EAAA,cAAc,CAC1B,QAAS,KAIzB,kCA3DuB","ignoreList":[0]}