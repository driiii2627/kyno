module.exports=[56115,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({siteKey:a,onVerify:d,onError:e,theme:f="dark"}){let g=(0,c.useRef)(null),h=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(!document.getElementById("cf-turnstile-script")){let a=document.createElement("script");a.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",a.id="cf-turnstile-script",a.async=!0,a.defer=!0,document.head.appendChild(a)}let b=()=>{window.turnstile&&g.current&&!h.current&&(h.current=window.turnstile.render(g.current,{sitekey:a,theme:f,callback:a=>d(a),"error-callback":()=>e?.()}))};if(window.turnstile)b();else{let a=setInterval(()=>{window.turnstile&&(clearInterval(a),b())},100);return()=>clearInterval(a)}return()=>{h.current&&window.turnstile&&(window.turnstile.remove(h.current),h.current=null)}},[a,f]),(0,b.jsx)("div",{ref:g,style:{minHeight:"65px",minWidth:"300px"}})}a.s(["default",()=>d])},66649,a=>{a.v({activeTab:"AuthForm-module__oRl-7W__activeTab",container:"AuthForm-module__oRl-7W__container",error:"AuthForm-module__oRl-7W__error",fadeIn:"AuthForm-module__oRl-7W__fadeIn",form:"AuthForm-module__oRl-7W__form",header:"AuthForm-module__oRl-7W__header",helperText:"AuthForm-module__oRl-7W__helperText",input:"AuthForm-module__oRl-7W__input",inputGroup:"AuthForm-module__oRl-7W__inputGroup",label:"AuthForm-module__oRl-7W__label",loadingOverlay:"AuthForm-module__oRl-7W__loadingOverlay",loadingText:"AuthForm-module__oRl-7W__loadingText",rateLimitContainer:"AuthForm-module__oRl-7W__rateLimitContainer",spin:"AuthForm-module__oRl-7W__spin",spinner:"AuthForm-module__oRl-7W__spinner",strengthBarBg:"AuthForm-module__oRl-7W__strengthBarBg",strengthBarFill:"AuthForm-module__oRl-7W__strengthBarFill",strengthFair:"AuthForm-module__oRl-7W__strengthFair",strengthGood:"AuthForm-module__oRl-7W__strengthGood",strengthLabel:"AuthForm-module__oRl-7W__strengthLabel",strengthMeter:"AuthForm-module__oRl-7W__strengthMeter",strengthPerfect:"AuthForm-module__oRl-7W__strengthPerfect",strengthWeak:"AuthForm-module__oRl-7W__strengthWeak",submitButton:"AuthForm-module__oRl-7W__submitButton",subtitle:"AuthForm-module__oRl-7W__subtitle",tab:"AuthForm-module__oRl-7W__tab",tabs:"AuthForm-module__oRl-7W__tabs",timer:"AuthForm-module__oRl-7W__timer",timerLabel:"AuthForm-module__oRl-7W__timerLabel",title:"AuthForm-module__oRl-7W__title",turnstileWrapper:"AuthForm-module__oRl-7W__turnstileWrapper"})},9472,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(66649),e=a.i(56115),f=a.i(50944);let g=["gmail.com","outlook.com","hotmail.com","live.com","yahoo.com","icloud.com","proton.me","protonmail.com"];function h({loginCode:a,onLogin:h,onRegister:i,siteKey:j}){let k,[l,m]=(0,c.useState)("login"),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),D=(0,f.useRouter)();(0,c.useEffect)(()=>{if(!z)return;let a=setInterval(()=>{let b=new Date,c=z.getTime()-b.getTime();if(c<=0){A(null),C(""),clearInterval(a);return}let d=Math.floor(c/1e3/60%60),e=Math.floor(c/1e3%60);C(`${d.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`)},1e3);return()=>clearInterval(a)},[z]);let E=(k=0,p?(p.length>=6&&k++,p.length>=10&&k++,/[A-Z]/.test(p)&&k++,/[0-9]/.test(p)&&k++,/[^A-Za-z0-9]/.test(p)&&k++,k<=2)?{score:k,label:"Fraca",colorClass:d.default.strengthWeak}:k<=3?{score:k,label:"Média",colorClass:d.default.strengthFair}:k<=4?{score:k,label:"Boa",colorClass:d.default.strengthGood}:{score:k,label:"Excelente",colorClass:d.default.strengthPerfect}:{score:k,label:"",colorClass:""}),F=E.score>=3,G=a=>{if(!a)return!0;let b=a.split("@")[1]?.toLowerCase();return g.includes(b)},H=async b=>{if(b.preventDefault(),w(null),y(null),u(!0),!r){w("Por favor, complete a verificação de segurança."),u(!1);return}if("register"===l){if(!F){w("A senha precisa ser mais forte."),u(!1);return}if(!G(n)){w("Domínio de e-mail não permitido (apenas Gmail, Outlook, Yahoo, etc)."),u(!1);return}}let c=new FormData;c.append("email",n),c.append("password",p),c.append("code",a),r&&c.append("cf-turnstile-response",r);try{if("login"===l){let a=await h(c);if(a.error)w(a.error),a.blockedUntil&&A(new Date(a.blockedUntil)),window.turnstile&&(window.turnstile.reset(),s(""));else{y("Bem vindo de volta! Redirecionando..."),setTimeout(()=>{D.push("/")},2e3);return}}else{let a=await i(c);if(a.error)w(a.error),a.blockedUntil&&A(new Date(a.blockedUntil)),window.turnstile&&(window.turnstile.reset(),s(""));else if(a.autoLogin){y("Bem vindo! Redirecionando..."),setTimeout(()=>{D.push("/")},2e3);return}else m("login"),y("Conta criada com sucesso! Faça login para continuar."),q(""),window.turnstile&&(window.turnstile.reset(),s(""))}}catch(a){w("Ocorreu um erro inesperado. Tente novamente.")}finally{x||u(!1)}},I=a=>{m(a),w(null),y(null),s(""),window.turnstile&&window.turnstile.reset()};return z?(0,b.jsx)("div",{className:d.default.container,children:(0,b.jsxs)("div",{className:d.default.rateLimitContainer,children:[(0,b.jsx)("div",{className:d.default.timer,children:B}),(0,b.jsx)("p",{className:d.default.timerLabel,children:"Muitas tentativas. Aguarde para tentar novamente."})]})}):(0,b.jsxs)("div",{className:d.default.container,children:[x&&(0,b.jsxs)("div",{className:d.default.loadingOverlay,children:[(0,b.jsx)("div",{className:d.default.spinner}),(0,b.jsx)("div",{className:d.default.loadingText,children:"Entrando..."})]}),(0,b.jsxs)("header",{className:d.default.header,children:[(0,b.jsx)("h1",{className:d.default.title,children:"Kyno+"}),(0,b.jsx)("p",{className:d.default.subtitle,children:"Acesse sua conta para continuar"})]}),(0,b.jsxs)("div",{className:d.default.tabs,children:[(0,b.jsx)("button",{className:`${d.default.tab} ${"login"===l?d.default.activeTab:""}`,onClick:()=>I("login"),children:"Entrar"}),(0,b.jsx)("button",{className:`${d.default.tab} ${"register"===l?d.default.activeTab:""}`,onClick:()=>I("register"),children:"Criar Conta"})]}),(0,b.jsxs)("form",{onSubmit:H,className:d.default.form,children:[(0,b.jsxs)("div",{className:d.default.inputGroup,children:[(0,b.jsx)("label",{className:d.default.label,children:"E-mail"}),(0,b.jsx)("input",{type:"email",value:n,onChange:a=>o(a.target.value),className:d.default.input,placeholder:"seu@email.com",required:!0}),"register"===l&&n&&!G(n)&&(0,b.jsx)("span",{style:{fontSize:"0.75rem",color:"#eab308",marginTop:"4px"},children:"Apenas e-mails confiáveis (Gmail, Outlook, Yahoo...)"})]}),(0,b.jsxs)("div",{className:d.default.inputGroup,children:[(0,b.jsx)("label",{className:d.default.label,children:"Senha"}),(0,b.jsx)("input",{type:"password",value:p,onChange:a=>q(a.target.value),className:d.default.input,placeholder:"••••••••",required:!0,minLength:6}),"register"===l&&p.length>0&&(0,b.jsxs)("div",{className:d.default.strengthMeter,children:[(0,b.jsxs)("div",{className:d.default.strengthLabel,children:[(0,b.jsx)("span",{children:"Força da senha"}),(0,b.jsx)("span",{children:E.label})]}),(0,b.jsx)("div",{className:d.default.strengthBarBg,children:(0,b.jsx)("div",{className:`${d.default.strengthBarFill} ${E.colorClass}`,style:{width:`${E.score/5*100}%`}})})]})]}),(0,b.jsx)("div",{className:d.default.turnstileWrapper,children:(0,b.jsx)(e.default,{siteKey:j,onVerify:a=>s(a),theme:"dark"})}),v&&(0,b.jsx)("div",{className:d.default.error,children:v}),x&&!x.includes("Redirecionando")&&(0,b.jsx)("div",{style:{backgroundColor:"rgba(34, 197, 94, 0.2)",border:"1px solid #22c55e",color:"#22c55e",padding:"12px",borderRadius:"8px",fontSize:"0.875rem",marginBottom:"1rem",textAlign:"center"},children:x}),(0,b.jsx)("button",{type:"submit",className:d.default.submitButton,disabled:t||!r||"register"===l&&(!F||!G(n)),children:t?"Processando...":"login"===l?"Entrar":"Criar Conta"}),(0,b.jsx)("p",{className:d.default.helperText,children:"login"===l?"Esqueceu a senha? Entre em contato com o suporte.":"Ao criar conta você concorda com os termos."})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_components_auth_df374b29._.js.map