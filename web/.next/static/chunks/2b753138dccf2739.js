(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35482,e=>{"use strict";var t=e.i(43476),l=e.i(71645);function r({siteKey:e,onVerify:r,onError:a,theme:o="dark"}){let n=(0,l.useRef)(null),s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!document.getElementById("cf-turnstile-script")){let e=document.createElement("script");e.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",e.id="cf-turnstile-script",e.async=!0,e.defer=!0,document.head.appendChild(e)}let t=()=>{window.turnstile&&n.current&&!s.current&&(s.current=window.turnstile.render(n.current,{sitekey:e,theme:o,callback:e=>r(e),"error-callback":()=>a?.()}))};if(window.turnstile)t();else{let e=setInterval(()=>{window.turnstile&&(clearInterval(e),t())},100);return()=>clearInterval(e)}return()=>{s.current&&window.turnstile&&(window.turnstile.remove(s.current),s.current=null)}},[e,o]),(0,t.jsx)("div",{ref:n,style:{minHeight:"65px",minWidth:"300px"}})}e.s(["default",()=>r])},8990,e=>{e.v({activeTab:"AuthForm-module__oRl-7W__activeTab",container:"AuthForm-module__oRl-7W__container",error:"AuthForm-module__oRl-7W__error",fadeIn:"AuthForm-module__oRl-7W__fadeIn",form:"AuthForm-module__oRl-7W__form",header:"AuthForm-module__oRl-7W__header",helperText:"AuthForm-module__oRl-7W__helperText",input:"AuthForm-module__oRl-7W__input",inputGroup:"AuthForm-module__oRl-7W__inputGroup",label:"AuthForm-module__oRl-7W__label",loadingOverlay:"AuthForm-module__oRl-7W__loadingOverlay",loadingText:"AuthForm-module__oRl-7W__loadingText",rateLimitContainer:"AuthForm-module__oRl-7W__rateLimitContainer",spin:"AuthForm-module__oRl-7W__spin",spinner:"AuthForm-module__oRl-7W__spinner",strengthBarBg:"AuthForm-module__oRl-7W__strengthBarBg",strengthBarFill:"AuthForm-module__oRl-7W__strengthBarFill",strengthFair:"AuthForm-module__oRl-7W__strengthFair",strengthGood:"AuthForm-module__oRl-7W__strengthGood",strengthLabel:"AuthForm-module__oRl-7W__strengthLabel",strengthMeter:"AuthForm-module__oRl-7W__strengthMeter",strengthPerfect:"AuthForm-module__oRl-7W__strengthPerfect",strengthWeak:"AuthForm-module__oRl-7W__strengthWeak",submitButton:"AuthForm-module__oRl-7W__submitButton",subtitle:"AuthForm-module__oRl-7W__subtitle",tab:"AuthForm-module__oRl-7W__tab",tabs:"AuthForm-module__oRl-7W__tabs",timer:"AuthForm-module__oRl-7W__timer",timerLabel:"AuthForm-module__oRl-7W__timerLabel",title:"AuthForm-module__oRl-7W__title",turnstileWrapper:"AuthForm-module__oRl-7W__turnstileWrapper"})},73449,e=>{"use strict";var t=e.i(43476),l=e.i(71645),r=e.i(8990),a=e.i(35482),o=e.i(18566);let n=["gmail.com","outlook.com","hotmail.com","live.com","yahoo.com","icloud.com","proton.me","protonmail.com"];function s({loginCode:e,onLogin:s,onRegister:i,siteKey:u}){let d,[c,m]=(0,l.useState)("login"),[h,_]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[v,x]=(0,l.useState)(!1),[A,F]=(0,l.useState)(null),[R,w]=(0,l.useState)(null),[W,j]=(0,l.useState)(null),[N,C]=(0,l.useState)(""),y=(0,o.useRouter)();(0,l.useEffect)(()=>{if(!W)return;let e=setInterval(()=>{let t=new Date,l=W.getTime()-t.getTime();if(l<=0){j(null),C(""),clearInterval(e);return}let r=Math.floor(l/1e3/60%60),a=Math.floor(l/1e3%60);C(`${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`)},1e3);return()=>clearInterval(e)},[W]);let T=(d=0,p?(p.length>=6&&d++,p.length>=10&&d++,/[A-Z]/.test(p)&&d++,/[0-9]/.test(p)&&d++,/[^A-Za-z0-9]/.test(p)&&d++,d<=2)?{score:d,label:"Fraca",colorClass:r.default.strengthWeak}:d<=3?{score:d,label:"Média",colorClass:r.default.strengthFair}:d<=4?{score:d,label:"Boa",colorClass:r.default.strengthGood}:{score:d,label:"Excelente",colorClass:r.default.strengthPerfect}:{score:d,label:"",colorClass:""}),B=T.score>=3,k=e=>{if(!e)return!0;let t=e.split("@")[1]?.toLowerCase();return n.includes(t)},S=async t=>{if(t.preventDefault(),F(null),w(null),x(!0),!g){F("Por favor, complete a verificação de segurança."),x(!1);return}if("register"===c){if(!B){F("A senha precisa ser mais forte."),x(!1);return}if(!k(h)){F("Domínio de e-mail não permitido (apenas Gmail, Outlook, Yahoo, etc)."),x(!1);return}}let l=new FormData;l.append("email",h),l.append("password",p),l.append("code",e),g&&l.append("cf-turnstile-response",g);try{if("login"===c){let e=await s(l);if(e.error)F(e.error),e.blockedUntil&&j(new Date(e.blockedUntil)),window.turnstile&&(window.turnstile.reset(),b(""));else{w("Bem vindo de volta! Redirecionando..."),setTimeout(()=>{y.push("/")},2e3);return}}else{let e=await i(l);if(e.error)F(e.error),e.blockedUntil&&j(new Date(e.blockedUntil)),window.turnstile&&(window.turnstile.reset(),b(""));else if(e.autoLogin){w("Bem vindo! Redirecionando..."),setTimeout(()=>{y.push("/")},2e3);return}else m("login"),w("Conta criada com sucesso! Faça login para continuar."),f(""),window.turnstile&&(window.turnstile.reset(),b(""))}}catch(e){F("Ocorreu um erro inesperado. Tente novamente.")}finally{R||x(!1)}},L=e=>{m(e),F(null),w(null),b(""),window.turnstile&&window.turnstile.reset()};return W?(0,t.jsx)("div",{className:r.default.container,children:(0,t.jsxs)("div",{className:r.default.rateLimitContainer,children:[(0,t.jsx)("div",{className:r.default.timer,children:N}),(0,t.jsx)("p",{className:r.default.timerLabel,children:"Muitas tentativas. Aguarde para tentar novamente."})]})}):(0,t.jsxs)("div",{className:r.default.container,children:[R&&(0,t.jsxs)("div",{className:r.default.loadingOverlay,children:[(0,t.jsx)("div",{className:r.default.spinner}),(0,t.jsx)("div",{className:r.default.loadingText,children:"Entrando..."})]}),(0,t.jsxs)("header",{className:r.default.header,children:[(0,t.jsx)("h1",{className:r.default.title,children:"Kyno+"}),(0,t.jsx)("p",{className:r.default.subtitle,children:"Acesse sua conta para continuar"})]}),(0,t.jsxs)("div",{className:r.default.tabs,children:[(0,t.jsx)("button",{className:`${r.default.tab} ${"login"===c?r.default.activeTab:""}`,onClick:()=>L("login"),children:"Entrar"}),(0,t.jsx)("button",{className:`${r.default.tab} ${"register"===c?r.default.activeTab:""}`,onClick:()=>L("register"),children:"Criar Conta"})]}),(0,t.jsxs)("form",{onSubmit:S,className:r.default.form,children:[(0,t.jsxs)("div",{className:r.default.inputGroup,children:[(0,t.jsx)("label",{className:r.default.label,children:"E-mail"}),(0,t.jsx)("input",{type:"email",value:h,onChange:e=>_(e.target.value),className:r.default.input,placeholder:"seu@email.com",required:!0}),"register"===c&&h&&!k(h)&&(0,t.jsx)("span",{style:{fontSize:"0.75rem",color:"#eab308",marginTop:"4px"},children:"Apenas e-mails confiáveis (Gmail, Outlook, Yahoo...)"})]}),(0,t.jsxs)("div",{className:r.default.inputGroup,children:[(0,t.jsx)("label",{className:r.default.label,children:"Senha"}),(0,t.jsx)("input",{type:"password",value:p,onChange:e=>f(e.target.value),className:r.default.input,placeholder:"••••••••",required:!0,minLength:6}),"register"===c&&p.length>0&&(0,t.jsxs)("div",{className:r.default.strengthMeter,children:[(0,t.jsxs)("div",{className:r.default.strengthLabel,children:[(0,t.jsx)("span",{children:"Força da senha"}),(0,t.jsx)("span",{children:T.label})]}),(0,t.jsx)("div",{className:r.default.strengthBarBg,children:(0,t.jsx)("div",{className:`${r.default.strengthBarFill} ${T.colorClass}`,style:{width:`${T.score/5*100}%`}})})]})]}),(0,t.jsx)("div",{className:r.default.turnstileWrapper,children:(0,t.jsx)(a.default,{siteKey:u,onVerify:e=>b(e),theme:"dark"})}),A&&(0,t.jsx)("div",{className:r.default.error,children:A}),R&&!R.includes("Redirecionando")&&(0,t.jsx)("div",{style:{backgroundColor:"rgba(34, 197, 94, 0.2)",border:"1px solid #22c55e",color:"#22c55e",padding:"12px",borderRadius:"8px",fontSize:"0.875rem",marginBottom:"1rem",textAlign:"center"},children:R}),(0,t.jsx)("button",{type:"submit",className:r.default.submitButton,disabled:v||!g||"register"===c&&(!B||!k(h)),children:v?"Processando...":"login"===c?"Entrar":"Criar Conta"}),(0,t.jsx)("p",{className:r.default.helperText,children:"login"===c?"Esqueceu a senha? Entre em contato com o suporte.":"Ao criar conta você concorda com os termos."})]})]})}e.s(["default",()=>s])}]);